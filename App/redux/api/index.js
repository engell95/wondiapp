//const token = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImRhYTA2YTBhMjZiNTI4OWQ5ZmQxY2FlMjY4ZTdjZWMxN2VmZTM3NDljNjNhNThmOWYxYWU3NzkwZDAwZWVkZjU3YjMyZjE1ZDdlNTViMDg3In0.eyJhdWQiOiIxIiwianRpIjoiZGFhMDZhMGEyNmI1Mjg5ZDlmZDFjYWUyNjhlN2NlYzE3ZWZlMzc0OWM2M2E1OGY5ZjFhZTc3OTBkMDBlZWRmNTdiMzJmMTVkN2U1NWIwODciLCJpYXQiOjE1NjE3NTg0NTUsIm5iZiI6MTU2MTc1ODQ1NSwiZXhwIjoxNTkzMzgwODU1LCJzdWIiOiI1Iiwic2NvcGVzIjpbXX0.lls4ad6tch6TnoMYHZF_mTjUjgZq5t8O1c3wvIwHS4XKHwNX-HXZZWa10epy_YPaUuIFCziDlQo9faLcKNy7fKA-S0kNx_nnv_xZuY02ywVaDVrGUoWm8CeLW0PtF7ZwfvPHZbT5wIvGLqCwUwBm2OaZpa_SiHOsreeqxhSvB5b_GY25MdffXGKtzUWZXuYFL6UwuguzNZ65hv0GtB_9o3296besjXGn9hG31Xbkk23lwevudKURTlGBEMVkBbnUbBv6uMkYcqsRTgyNX1Tu6XcVEPmIVqZ64JO3psWK4U-DdmWQBPOxftLwO8tjh-67fgEfwG7eDizF0vkmXMGOo3xJjmtvi4Kxm9QjPiJ3p2QPZyy1hygRZMb2oO53cvi7xVXdch6CAsj7qIjIfhAgBArK7B8QoSFllec8XyoSMr8tRvWCZ7-c32nMsEAreioxSJCDifzTvUqvaricTuMSgrxwCEF4SphHdveu8eSAdgHKzw1ActfAGhluztqdZ90A5W3_OS_QkydeYfF7VhV8j-si1qyf-oR84I5L0YhScdSJQEyaoabMVJwAy8QwWhACPri34b-J2dPyPLoa-FYj6jmyRW8Y6pGPXRKfM1ogxuhDJ_kb9e_iDcwdqqxbdzghiSt_wNCzxwLvB2CBpWXLGKy7gp75NbfLW-putsKe0Gs';
const token ='eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjAxMDUxMWZhNDliNmIyOGVkZDhiZmQyODFkYjQxN2E0ZjMwMzhjZmY4OTMxZjNlMTdiMDBkZjc3MTZlNzBmY2JkYTBhMWYzNjc4MmY0MGJlIn0.eyJhdWQiOiIxIiwianRpIjoiMDEwNTExZmE0OWI2YjI4ZWRkOGJmZDI4MWRiNDE3YTRmMzAzOGNmZjg5MzFmM2UxN2IwMGRmNzcxNmU3MGZjYmRhMGExZjM2NzgyZjQwYmUiLCJpYXQiOjE1NjAxMzcyNDUsIm5iZiI6MTU2MDEzNzI0NSwiZXhwIjoxNTkxNzU5NjQ1LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.X8Kmuz6hD-LTlInxkb0t6vED9r-NjdDTT4D3wMEi8pB_xOgDssZ3ttXr8OQx1coBkq_IoLQ1k1ylkyLHvehE3E19SLsC5cJtlOXqu4sVrZOgjhXgw0ewB0q63bnu6A-o7TN9OEubUKcNdQCjkv0PxXlQIpxUiksPyyGc7VWLxrgF1yGMZ5AElIxSoZy3B2QFV1gQXZl-8uDy4zf8e37WFvDT_ke3JOpWQTcHll-5CvYazdweCRBxc4pixgPLtYbdObUEZSNJJj8h7yHs3HJ1m9EnJ3EWsgwme_7EyelMoARUf_xLBWaJk_mBZHqMzdXt3f68lSGV1FkiKZLCcIREiB933JxFBOMZ3KCHeRrOaU-LRP0UY-1yPCEisNqTzmdGIFid_NmL2Lw7OYzbX0TFbuIeAFWSiheAtEomdNkZ26PZE338VyIGTlDSwt4PNQ1nJbTpwpZbtHivdKYhE5Bupz_iNj_Wx51y6y06FfyYn2zY4_HcxfQOmQVYR8vq-tcAzUdsvZqoq7omL3BctJC6BxJkTkZ9A98Zber4qXa19ZezB-_wU3jTHTuspgg2Y320s0ffp0kmcKHTkWiC5FH1eqUSxVdVxB2HdYC_GWZtqQ9Kzxj99ZsLiI_6gxomiP5eUEaJop9A6QFSyYPope_ufUJO7plr8QoyojtHXaNTiZk';
const construc = 'https://test.wondiapp.com/api/';
//const construc = 'http://10.169.94.103:8080/api/'
//const construc = 'http://192.168.0.28:8080/api/'
//const construc = 'http://192.168.88.223:8080/api/'

//Rutas
    //Shop
    const category       = construc+'cat-empresa/list';
    const categoryshop   = construc+'empresas/categoria/';
    const shop           = construc+'empresas/';
    //Budget
    const budget         = construc+'presupuesto/';
    const budgetpost     = budget  +'crear';
    //Search
    const search         = construc+'productos/autocomplete/list/';
    const result         = construc+'buscar/';
    //General
    const suggestions    = construc+'empresas/categoria/';
    const products       = construc+'empresas/categoria/';
    //Promocion
    const promo          = construc+'promociones/';
    const promofull      = construc+'promociones/list';
    //User
    const user           = construc+'usuario/registro';
    const check          = construc+'islogged';
    const login          = construc+'llogin';
    const usercatg       = construc+ 'preferencias/categoriasxusiaro/add';
    const userdet        = construc+'usuario/';
    //Home
    const bestprice      = construc+'precios/productos/lits';
    const Similary       = construc+'buscar/productos/list/';
    const more_budgets   = construc+'productos/presupuestos/list';
    const best_search    = construc+'productos/buscados/list';
    const listproduxuser = construc+'usuario/productos/';

//Shop
    //Lista las categorias de empresa
    export const fetchCategory =  () => {
        return fetch(category, {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Lista las empresas que pertenecen a una categoría
    export const fetchShop =  (id) => {
        return fetch(categoryshop+id+'/list', {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Detalles de una empresa con promociones
    export const fetchShopD =  (data) => {
        return fetch(shop+data.id_shop+'/'+data.id_user+'/detalle', {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Lista de sucursales por empresa
    export const fetchSuc =  (id) => {
        return fetch(shop+id+'/sucursales/list', {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Lista las Productos que pertenecen a una Empresa
    export const fetchProductShop =  (id) => {
        return fetch(shop+id+'/productos/list', {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Agregar una empresa a los favoritos de un usuario
    export const Postfavemp =  (data) => {
        return fetch(shop+'addfavemp', {
            method: 'POST',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            },
            body: JSON.stringify({
                user_id:data.user_id,
                Cod_Empresa: data.Cod_Empresa,
            }),
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Remover una empresa de los favoritos de un usuario
    export const deletefavemp =  (data) => {
        return fetch(shop+data.Cod_Empresa+'/'+data.user_id+'/removefavemp', {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
//Budget
    //Lista presupuestos por usuario
    export const fetchBudget =  (id) => {
        return fetch(budget+id+'/list', {
            method: 'GET',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Detalle presupuestos
    export const fetchBudgetD =  (id) => {
        return fetch(budget+id+'/detail', {
            method: 'GET',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Eliminar presupuesto
    export const Destroybudget =  (id) => {
        return fetch(budget+id+'/destroy', {
            method: 'GET',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Crear presupuestos
    export const PostBudget =  (data) => {  
        return fetch(budgetpost, {
            method: 'POST',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            },
            body: JSON.stringify({
                UserId: data.user,
                N_Presupuesto: data.name,
                Date:data.date
            }),
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Añadir detalle de presupuesto a un presupuesto en específico
    export const PostBudgetD =  (data,budgetid) => {
        return fetch(budget+budgetid+'/detalle/add', {
            method: 'POST',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            },
            body: JSON.stringify({
                CProducto: data.prod,
                CSucursal: data.suc,
                Cant: data.cant,
            }),
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Quitar detalle de presupuesto a un presupuesto en específico
    export const DeleteBudget =  (data,budgetid) => {
        return fetch(budget+budgetid+'/detalle/remove', {
            method: 'POST',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            },
            body: JSON.stringify({
                CProducto: data.prod,
                CSucursal: data.suc,
            }),
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Edita datos de presupuesto
    export const EditBudget =  (data,budgetid) => {
        return fetch(budget+budgetid+'/edit', {
            method: 'PATCH',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            },
            body: JSON.stringify({
                N_Presupuesto: data.name,
                Date: data.date,
            }),
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Api eliminar cantidad de un producto
    export const AmountBudget =  (data,budgetid) => {
        return fetch(budget+budgetid+'/detalle/changeamount', {
            method: 'PATCH',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            },
            body: JSON.stringify({
                CProducto: data.prod,
                CSucursal: data.suc,
                Amount: data.cant,
            }),
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
//Search
    //lista de nombres de productos para auto completar
    export const fetchSearch =  (val) => {
        return fetch(search+val, {
            method: 'GET',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Busqueda 
    export const fetchResult =  (search) => {
        return fetch(result+search, {
            method: 'GET',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
//General
    export const fetchSuggestions = (id) => {
        return fetch(suggestions+id+'/list', {
            method: 'GET',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    export const fetchProducts = (id) => {
        return fetch(products+id+'/list', {
            method: 'GET',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
//Promocion
     export const fetchPromofull =  () => {
        return fetch(promofull, {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    export const fetchPromo =  (id) => {
        return fetch(promo+id+'/listbycatg', {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }

    export const fetchPromoprod =  (id) => {
        return fetch(promo+id+'/productos', {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
//user
    export const fetchhistory =  (id) => {
        return fetch(construc+'historial/'+id, {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }

    export const fetchuserdet =  (id) => {
        return fetch(userdet+id+'/detalle', {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }

    export const PostUserCatg =  (user_id,catempresa) => {

        const user = 'user_id='+user_id+'&';

        const cat_empresa = Object.keys(catempresa).map((key) => {
        return 'cat_empresa['+encodeURIComponent(key)+']=' + encodeURIComponent(catempresa[key].Cod_Cat_Empresa);
        }).join('&');

        const consolidado = user+cat_empresa;

        return fetch(usercatg, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',
                'Authorization': 'Bearer '+token,
            },
            body: consolidado,
               
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }

    export const ResetSocial =  (data) => {
        return fetch(construc+'password/social', {
            method: 'POST',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            },
            body: JSON.stringify({
                email: data.email,
                password: data.password
            }),
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }

    export const ResetPass =  (data) => {
        return fetch(construc+'password/reset', {
            method: 'POST',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            },
            body: JSON.stringify({
                email: data.email,
                password: data.password
            }),
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }

    export const Postsesiones =  (data) => {
        return fetch(construc+'sesiones', {
            method: 'POST',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            },
            body: JSON.stringify({
                user_id: data.user_id,
                Tip_Disp: data.Tip_Disp,
                Dispositivo: data.Dispositivo,
                OS: data.OS,
                Id_dispositivo: data.Id_dispositivo,
                Nombre_dispositivo: data.Nombre_dispositivo,
            }),
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }

    export const Postvisprod =  (data) => {
        return fetch(construc+'visualizacion', {
            method: 'POST',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            },
            body: JSON.stringify({
                user_id: data.user_id,
                Cod_Producto: data.Cod_Producto,
            }),
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }

    export const Useredit =  (data) => {
        return fetch(userdet+'edit', {
            method: 'POST',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            },
            body: JSON.stringify({
                Cod_usuario:data.Cod_usuario,
                Nombre: data.Nombre,
                genero: data.genero,
                email: data.email,
            }),
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }

    export const passwordreset =  (data) => {
        return fetch(construc+'password/lreset', {
            method: 'POST',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            },
            body: JSON.stringify({
               Cod_usuario: data.Cod_usuario, 
               Password: data.Password
            }),
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }

    export const PostUser =  (data) => {
        return fetch(user, {
            method: 'POST',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            },
            body: JSON.stringify({
                Nombre: data.name,
                User: data.user,
                email: data.email,
                genero:data.gener,
                password: data.pass,
                password_confirmation: data.passc
            }),
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }

    export const Postcheck =  (data) => {
        return fetch(check, {
            method: 'POST',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            },
            body: JSON.stringify({
                id: data.user,
                code: data.token
            }),
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }

    export const Postlogin =  (data) => {
        console.log(data)
        return fetch(login, {
            method: 'POST',
            headers: {
                 Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            },
            body: JSON.stringify({
                email:data.email,
                username: data.username,
                password: data.password
            }),
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
//home
    //Lista de productos con precios bajos (wondi select)
    export const fetchBestprice =  () => {
        return fetch(bestprice, {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Lista de productos similares a tus busquedas
    export const fetchSimilary =  (id) => {
        return fetch(Similary+id, {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Lista de productos mas presupuestos en las ultimas 24 horas
    export const fetchMorebudgets =  () => {
        return fetch(more_budgets, {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Lista de productos mas buscados en general en las ultimas 24 horas
    export const fetchBestsearch =  () => {
        return fetch(best_search, {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //detalles de un producto
    export const fetchproddet =  (id) => {
        return fetch(construc+'productos/'+id+'/detail', {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Lista de productos destacados para un usuario
    export const fetchListprodxuser =  (id) => {
        return fetch(listproduxuser+id+'/lits', {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }
    //Lista de productos destacados para un usuario full
    export const fetchListprodxuserfull =  (id) => {
        console.log(id)
        return fetch(listproduxuser+id+'/litsfull', {
            method: 'GET',
            headers: {
                Accept: 'application/json',
                'Content-Type': 'application/json',
                'Authorization': 'Bearer '+token,
            }
        })
        .then(Response =>{ 
            return Promise.all([Response, Response.json()])
        })
    }